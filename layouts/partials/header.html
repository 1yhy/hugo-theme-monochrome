<header class="mt-9 mb-8">
    <div class="flex justify-between items-center">
        <div class="flex items-center">
            <input id="navbar_btn" class="hidden" type="checkbox">
            <label for="navbar_btn" class="menu-btn block xl:hidden">
                <span class="navicon"></span>
            </label>
            <a href="{{ .Site.Home.RelPermalink }}" class="font-bold text-2xl mr-auto">
                {{- if .Site.Params.navbarTitle -}}
                    {{- .Site.Params.navbarTitle -}}
                {{- else -}}
                    {{- .Site.Title -}}
                {{- end -}}
            </a>
        </div>

        <div class="flex items-center">
            <div class="cursor-pointer fill-800 fill-600-hover">
                <svg id="dark_mode_btn" class="hidden w-4 h-4" viewBox="0 0 24 24">
                    {{- partial "svg/sun.html" -}}
                </svg>
                <svg id="light_mode_btn" class="hidden w-4 h-4" viewBox="0 0 24 24">
                    {{- partial "svg/moon.html" -}}
                </svg>
            </div>

            {{ if .Site.IsMultiLingual }}
                <div class="relative flex items-center cursor-pointer fill-800 fill-600-hover text-800 text-600-hover text-xs ml-2 py-2">
                    <svg id="translation_btn" class="w-4 h-4" viewBox="0 0 24 24">
                        {{- partial "svg/earth.html" -}}
                    </svg>
                    <span class="hidden ml-1 sm:block">{{ .Site.Language.LanguageName }}</span>
                    <ul id="translation_menu" class="absolute top-full text-800 left-0 rounded hidden w-max shadow-xl z-10">
                        {{ range .AllTranslations }}
                        <li class="px-2 py-1.5 bg-0 bg-100-hover ">
                            <a href="{{ .Permalink }}">{{ .Language.LanguageName }}</a>
                        </li>
                        {{ end }}
                    </ul>
                </div>
            {{ end }}

            {{ if (.Site.Params.siteSearch | default false) }}
                <span class="mx-2.5 font-extralight">|</span>

                <div class="relative flex items-center fill-800 fill-600-hover">
                    <svg id="search_btn" class="w-4 h-4 cursor-pointer" viewBox="2 0 20 20">
                        {{- partial "svg/search.html" -}}
                    </svg>
                    {{- partial "search-menu.html" -}}
                </div>
            {{ end }}
        </div>
    </div>

    <nav id="navbar" class="mt-3 hidden xl:block">
        {{- $currentPage := . -}}
        {{- $currentUrl := .RelPermalink -}}
        {{- $isHome := .IsHome -}}
        <ul class="flex">
            {{- range .Site.Menus.navbar -}}
                {{ $navbar_item := "text-sm border-b-2 pb-1 mr-2 font-medium" }}
                {{- if $currentPage.IsMenuCurrent "navbar" . -}}
                    {{/* default style */}}
                {{- else if eq $currentUrl .URL -}}
                    {{/* default style */}}
                {{- else if in ($currentUrl|lower) (.URL|lower) -}}
                    {{ $navbar_item = printf "%s %s" $navbar_item "insection" }}
                {{- else -}}
                    {{ $navbar_item = printf "%s %s" $navbar_item "inactive" }}
                {{- end -}}

                {{- if .Children -}}
                    <li class="navbar-item-dropdown {{ $navbar_item }}">
                        <div class="flex items-center">
                            <a href="{{ .URL }}">{{- .Name -}}</a>
                            <svg class="w-4 h-4" viewBox="3 3 18 18">
                                {{- partial "svg/arrow-down.html" -}}
                            </svg>
                        </div>
                        <ul class="navbar-dropdown mt-1.5 -ml-2.5">
                            {{- partial "navbar/nested-desktop.html" . -}}
                        </ul>
                    </li>
                {{- else -}}
                    <li class="navbar-item {{ $navbar_item }}">
                        <a href="{{ .URL }}">{{- .Name -}}</a>
                    </li>
                {{- end -}}
            {{- end -}}
        </ul>
    </nav>

    <nav id="navbar_sm" class="mt-2 hidden">
        <ul>
            {{ range .Site.Menus.navbar }}
                <li class="text-sm mt-2">
                    <a href="{{ .URL }}">{{- .Name -}}</a>
                    {{- partial "navbar/nested-mobile.html" . -}}
                </li>
            {{ end }}
        </ul>

        <hr class="my-4">
    </nav>
</header>
